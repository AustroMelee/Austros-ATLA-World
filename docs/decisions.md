# Austros ATLA World Encyclopedia – Architectural Decisions & Rationale

## Slug-Native Architecture
- All entity lookups, navigation, and hydration are performed strictly by slug.
- Slugs are unique, deterministic, and URL-safe, generated at enrichment time.
- No fallback to IDs or names is allowed anywhere in the client or data pipeline.
- Slug collisions are detected and resolved at build time (numeric suffixes if needed).
- All cross-entity references use slugs only.

## Data Pipeline
- Validation, enrichment, and indexing are strictly separated (SRP-compliant):
  - **Validation:** Ensures raw data matches schemas.
  - **Enrichment:** Adds synonyms, tags, relations, and slugs per config.
  - **Indexing:** Builds a FlexSearch index and record map keyed by slug.
- All scripts are idempotent and can be rerun at any time.
- Errors in enrichment or indexing are logged and skipped, never fatal.

## Client Architecture
- All routing and navigation is slug-based (e.g., `/characters/zuko`).
- Detail pages hydrate entities by slug only.
- 404/NotFound handling is robust and user-friendly.
- All UI components and hooks are SRP-compliant (one file, one responsibility).
- Styling is handled by vanilla-extract for type safety and zero runtime overhead.

## Build & Deployment
- Data and index files are always copied to `/public/` after each build.
- The build fails if slugs are missing, duplicated, or malformed.
- All scripts and components are strictly typed and linted.

## SRP (Single Responsibility Principle)
- Each script, component, and page is responsible for one concern only.
- No cross-cutting logic or duplicated business rules.
- Types are colocated and imported as needed.
- All architectural decisions reinforce modularity, maintainability, and testability.

## Troubleshooting & Maintenance
- If a slug is missing or duplicated, check the enrichment config and raw data.
- If a detail page 404s, ensure the slug exists in both data and index files.
- All errors are logged with enough detail to identify the source.

## References
- `/docs/blueprints/` – Project plan and requirements
- `/docs/setup.md` – Step-by-step workflow and operational guide

---

*Last updated: [auto-generated by Cursor]*
